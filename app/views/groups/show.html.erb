<p id="notice"><%= notice %></p>

<h1><%= @group.title %></h1>
<%= link_to image_tag(@group.image.url(:square)), @group.image.url %>
<p><%= @group.description %></p>


<% if @group_member %>
  Leave Group(GroupUser path)

  <h3>Members</h3>
  <table>
    <thead>
      <tr>
        <th colspan="2"></th>
      </tr>
    </thead>

    <tbody>
      <% @members.each do |user| %>
        <tr>
          <td><%= link_to image_tag(user.avatar.url(:square)), user.avatar.url %>
</td>
          <td><%= link_to user.name, user %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <h3>Scripts</h3>
  <table>
    <thead>
      <tr>
        <th colspan="4"></th>
      </tr>
    </thead>

    <tbody>
      <% @scripts.each do |script| %>
        <tr>
          <td><%= link_to script.title, script %></td>
          <td><%= script.description %></td>
          <td><%= link_to script.user.name, script.user %></td>
          <% if script.user == current_user %>
          <td>'Remove' (GroupScript destroy)</td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>

  Post Script (GroupScript create)
  <% if @group.mods.include?(current_user) %>
    Add Mod
    (GroupUser edit)
    <%= link_to 'Edit', edit_group_path(@group) %> |
  <% end %>

<% else %>
  You don't have permission to view this group!
  Request to Join (GroupUser create)
  <%= link_to 'Back', groups_path %>
<% end %>